## 1 인프라 기술의 기초

- 최근에는 라우터와 L3 스위치 의 경계가 거의 없어져서, 하드웨어가 아닌 역할에 따라 구별하는 경우가 많습니다.

## 2 인프라의 변천과 특징

- (KVM) 하드웨어를 소프트웨어적으로 에뮬레이트하므로 오버헤드가 크게 걸립니다. 따라서 같은 서버라도 물리 서버를 사용하는 경우와 가상 서버를 사용하는 경우의 성능이 다를 수 있습니다. 가상 서버를 사용하는 경우의 성능이 나쁘게 나올 수 있습니다.

- 오버 커밋이란 가상화 환경에서 CPU 또는 메모리 용량을 실제보다 크게 할당하는 것입니다. (...) 단 가상으로 2코어를 만든다고 해서 성능이 2배가 되는 것은 아닙니다. 실제로 테스트해 보면 1.2배 정도 성능이 향상됩니다. (...)호스트 서버 내부에서 다른 사용자가 CPU를 많이 사용하면, 같은 플랜을 사용하는 경우에도 가상 서버의 처리 능력이 달라지는 문제가 발생합니다. (...) 너무 많이 하면 제공하는 가상 서버의 성능이 나빠질 수 있습니다. 

- PaaS 사업자가 제공하는 서비스를 사용하지 않고, 직접 자신의 서버에 PaaS 환경을 구축할 수 있게 해주는 소프트웨어가 있습니다. 이렇게 하면 사설 PaaS를 구축할 수 있는데 클라우드 파운드리와 오픈시트프가 대표적인 PaaS 구축 소프트웨어입니다.

- IaaS로 서비스를 만들 때는 여러 리전의 서버를 활용한 확장 구성을 꼭 검토해 보기 바랍니다.

- IaaS를 사용하면 데이터베이스 서버를 생성할 수 있지만, 데이터베이스 서버를 직접 관리하고 운용하는 것은 굉장히 힘듭니다. (...) 따라서 몇몇 IaaS 제공 업체는 완전 관리형 데이터베이스 서버를 PaaS로 제공합니다. 

- 보통 IaaS는 저렴하고 베어메탈과 같은 전용 서버는 비싸다고 생각하는 경우가 대부분입니다. (...) 하지만 장기적으로 보면 오히려 베어메탈의 비용이 저렴한 경우가 많습니다. 예를 들어 데이터베이스 서버를 사용하는 정도의 성능을 기준으로 살펴보면 IaaS보다 베어메탈을 사용하는 것이 훨씬 저렴합니다.

## 3 시스템 테스트부터 구축까지

- swap이 크더라도 swap에 읽고 쓰는 양이 많지않다면 적절하게 스왑 아웃되므로 제대로 활용하는 것입니다. 하지만 swap에 읽고 쓰는 빈도 수가 많은 경우에는 주의해야 합니다. 

- 클라우드 환경에서는 네트워크 인터페이스 카드의 실제 속도와 제한된 전송 속도 사이에 차이가 발생해 예상보다 속도가 나오지 않는 경우도 있으므로 주의하기 바랍니다.

- 클라이언트가 "이런 것을 사용하고 싶다"라고 강력하게 주장했을 때는 이로 인해 발생하는 문제들을 어떻게 해결할 수 있는지가 설계하는 사람의 능력을 나타냅니다.

- (설계에서) 가장 중요한 것은 운용의 용이성입니다. 시스템 구축 업무를 원활하게 진행하려고 운용팀을 따로 두는 경우가 많습니다. (...) 따라서 설계 또는 구축을 담당하는 사람은 처음부터 운용을 다른 사람에게 맡길 것을 고려해서 작업하는 것이 중요합니다. 

- 고가용성(HA)과 가변성(Scalability), HA는 Active/standby의 2대 확장 구성을 통해 서버가 중단되지 않게 접근하는 방법을 의미하는 경우가 많습니다. 가변성은 부하에 대응하려고 시스템 규모를 확대 & 축소하는 구성을 나타냅니다.

- 구축 단계를 종료하면 운용 단계가 시작됩니다. 운용 단계에서 무엇을 할지 따로 생각하지 않고 구축 단계를 완료하면 치명적인 문제가 발생할 수 있습니다. 또한 운용 단계에서 필요 이상으로 시간과 노력을 투자해야 하는 상황이 발생할 수도 있습니다. (...) 운용 단계를 고려하지 않고 단지 유행한다는 이유로 기술을 선택하다보면 클라이언트의 요청은 충족되어도 운용 단계에서 예상치 못한 큰 비용이 발생할 수 있습니다. (...) 시스템 구축은 짧은 시간 안에 끝나도 운용은 몇 년 동안 이어집니다.

- 보안사고가 발생했을 때 정보 유출이 없었다는 사실을 증명하는 것은 굉장히 어렵습니다. (...) 데이터베이스 서버는 성능이 중요하므로 모든 통신을 기록해 두기 어렵지만 인증 성공, 실패, 오류 정보 정도는 저장하는 것이 좋습니다. 그래야 해당 시간에 로그인하지 않았다는 것을 증명할 수 있기 때문입니다.


## 4. 운용 체제 구축, 장애 대응, 예방 운용

- 운용이라고 하면 운용 단계만 관련 있다고 생각할 수 있지만, 운용 담당자는 설계 단계부터 관여해야 합니다. (...) 한 번 만들기 시작하면 비용 측면과 프로세스 측면 모두 시스템 상태를 쉽게 되돌릴 수 없으므로 이 시점부터 해야 합니다. 설계 단계에서는 구축 담당자가 요건에 맞게 필요한 장비와 소프트웨어를 선정합니다. 이때 운용 담당자가 의식하는 부분은 장애허용성과 보안 대책입니다. 

  - 허용할 수 있는 다운 타임
    - 돈을 다루는 시스템인가? 높은 수준의 보안 요구
    - 생명과 관련된 시스템인가? 높은 가용성 요구
    - 개인 정보나 민감한 정보를 다루는 시스템인가? 접근 제한, 암호화, 부정한 접근 여부 확인 방식
    - 인허가 사업과 관련된 시스템인가? 장애 억제 대책, 장애 후 빠른 복구 가능성

- DNS 서버의 문제가 아니라면 네트워크 경로상에 어떤 문제가 발생해 연결되지 않는 상태일 가능성이 있습니다. (...) PC에서 서버로 traceroute <서버 IP> 
- 유지 보수의 성질로 분류하면 크게 두 가지로 나눌 수 있습니다. 바로 활성 유지보수와 비활성 유지보수입니다. 활성 유지 보수는 서비스를 중단하지 않고 실행할 수 있습니다. (...) 반대로 비활성 유지 보수는 서비스를 중단할 필요가 있는 유지 보수입니다.
- 비활성 유지보수를 최대한 피해야 다운 타임을 짧게할 수 있다고 지금까지 설명했습니다. (...) 인프라가 활성 유지 보수를 할 수 있는지의 여부는 설계에 의해 결정된다고 생각하면 됩니다. 좀더 나아가면 건적을 내는 시점에 결정되기도 합니다. 어쨌든 활성 유지 보수를 할 수 있도록 인프라를 구성하는 데는 많은 비용이 들어갑니다. 따라서 운용 방침은 매우 빠른 시점부터 결정해야 합니다.


## 5. 인프라 엔지니어를 위한 보안 입문

- 관리자가 클라우드 도입을 망설이는 가장 큰 이유 중 하나는 책임 분담이 명확하지 않다는 점입니다. (...) 따라서 물리 기반은 클라우드 호스팅 사업자가 책임을 지는 범위며, 가상 서버는 클라우드 관리자가 책임을 집니다. 이것이 클라우드의 공유 책임 모델입니다.

## 6. 데브옵스 시대에 요구하는 기술

- 클라우드는 인프라 엔지니어를 둘러싼 환경에는 다음과 같은 점들이 큰 영향을 주었습니다.
  - 서버 자원을쉽게 조달할 수 있게 되었다
  - 인프라 부분을 프로그램적으로 제어할 수 있게 되었다

- 그리고 클라우드 시대에는 모든 것은 고장날 수 있다라고 가정해서 시스템을 설계하게 되었습니다. 특정 서버 하나에서 장애가 발생할 가능성이 있으므로 시스템 전체의 가용성을 확보해야 한다는 발상입니다.
- 하드웨어를 직접 조달하는 온프레미스 환경에서는 하드웨어의 신뢰성을 어느 정도 직접 제어할 수 있었습니다. 이러한 환경에서는 1대 또는 소수의 내결함성이 뛰어난 서버에 여러가지 역할을 모두 넣는 구성이 합리적이었습니다. 하지만 그런 시스템을 클라우드에 구성할 경우 문제가 발생합니다. 우리 손이 닿지 않는 부분에서 클라우드의 하드웨어 장애가 발생하기 때문입니다.
- 클라우드는 장애가 일어날 것을 전제로 사용해야 합니다. 이렇게 전재해야 한다고 강력하게 주장한 곳은 넷플릭스로 FIT(failure lnjection testing0라는 개념을 주장합니다. FIT의 기본적인 개념은 일부러 장애를 일으켰을 때도 올바르게 시스템이 동작하도록 운용 구성한다는 것입니다.
- Infrastructure as code는 인프라를 코드로 다룬다는 개념입니다. 다음과 같은 장점이 생깁니다. (1) 인프라 관련 작업을 자도오하해서 업무를 효율화할 수 있습니다 (2) 코드를 기반으로 인프라 관리를 할 수 있습니다.
- 통합 테스트(Integration test)는 서버 내부의 상태를 테스트하는 화이트박스 테스트지만, 인수 테스트(Acceptance test)는 서버 외부의 동작을 테스트하는 블랙박스 테스트입니다. 인수 테스트는 준비&실행하는 사람이 내부 구현을 신경 쓰지 않습니다. 외부에서 보이는 동작에만 주목하면 됩니다.
- 물론 사람이 직접하는 모든 일은 자동화의 대상입니다. (...) 자동화의 우선순위는 여러 번 사용할 수 있는, 복잡해서 사람이 직접 하다보면 실수할 수 있는 작업입니다. 이러한 것부터 자동화하기 바랍니다.
- 불변 인프라(immutable infrastructure)란 서버를 불변하는 것으로 다루는 개념입니다. 변경이 필요한 경우에는 아예 새로운 서버를 구축합니다. 서버를 불변하는 것으로 다룰 경우 가장 큰 장점은 서버를 항상 깨끗한 상태로 유지할 수 있다는 것입니다. 
    